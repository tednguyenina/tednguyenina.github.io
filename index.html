<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <link rel="icon" href="favicon.ico" />
    <title>Infinity Arena's Lucky Number Machine</title>

    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="./styles/style.css"
      type="text/css"
      media="screen"
    />
    <link
      rel="stylesheet"
      href="./dist/jquery.slotmachine.css"
      type="text/css"
      media="screen"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css"
      type="text/css"
    />

    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <script src="./dist/slotmachine.js"></script>
    <script src="./dist/jquery.slotmachine.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/javascript.min.js"></script>
    <script
      defer
      src="https://use.fontawesome.com/releases/v5.0.10/js/all.js"
      integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <div id="casino">
      <div class="content">
        <div class="slotNumber">
          <div id="casino1" class="slotMachine">
            <div class="slot slot1"></div>
            <div class="slot slot2"></div>
            <div class="slot slot3"></div>
            <div class="slot slot4"></div>
            <div class="slot slot5"></div>
            <div class="slot slot6"></div>
            <div class="slot slot7"></div>
            <div class="slot slot8"></div>
            <div class="slot slot9"></div>
            <div class="slot slot10"></div>
          </div>

          <div id="casino2" class="slotMachine">
            <div class="slot slot1"></div>
            <div class="slot slot2"></div>
            <div class="slot slot3"></div>
            <div class="slot slot4"></div>
            <div class="slot slot5"></div>
            <div class="slot slot6"></div>
            <div class="slot slot7"></div>
            <div class="slot slot8"></div>
            <div class="slot slot9"></div>
            <div class="slot slot10"></div>
          </div>

          <div id="casino3" class="slotMachine">
            <div class="slot slot1"></div>
            <div class="slot slot2"></div>
            <div class="slot slot3"></div>
            <div class="slot slot4"></div>
            <div class="slot slot5"></div>
            <div class="slot slot6"></div>
            <div class="slot slot7"></div>
            <div class="slot slot8"></div>
            <div class="slot slot9"></div>
            <div class="slot slot10"></div>
          </div>

          <div class="btn-group btn-group-justified" role="group">
            <button
              id="casinoShuffle"
              type="button"
              class="btn btn-primary btn-lg btn-1"
            >
              START
            </button>
            <button
              id="casinoStop"
              type="button"
              class="btn btn-primary btn-lg btn-2"
            >
              STOP
            </button>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="row"></div>
      </div>
    </div>

    <script id="codeScript5">
      let count = 0;
      const btnShuffle = document.querySelector("#casinoShuffle");
      const btnStop = document.querySelector("#casinoStop");
      const casino1 = document.querySelector("#casino1");
      const casino2 = document.querySelector("#casino2");
      const casino3 = document.querySelector("#casino3");
      const mCasino1 = new SlotMachine(casino1, {
        active: 0,
        delay: 500,
      });
      const mCasino2 = new SlotMachine(casino2, {
        active: 0,
        delay: 500,
      });
      const mCasino3 = new SlotMachine(casino3, {
        active: 0,
        delay: 500,
      });
    </script>
    <script id="codeScript6">
      let firstNumber = 0;
      let secondNumber = 0;
      let thirdNumber = 0;
      let maxNum = 248;
      if (window.location.hash && !isNaN(window.location.hash.substring(1))) {
        maxNum = Number(window.location.hash.substring(1));
      }
      /**
       * Using solution in here https://stackoverflow.com/questions/1527803/generating-random-whole-numbers-in-javascript-in-a-specific-range
       */
      function randomNumber(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }
      /**
       * Leading zeros format
       */
      function pad(num, size) {
        var s = "000000000" + num;
        return s.substr(s.length - size);
      }
      /**
       * Handle event click start lucky number machine
       */
      btnShuffle.addEventListener("click", () => {
        count = 3;
        firstNumber = 0;
        secondNumber = 0;
        thirdNumber = 0;

        mCasino1.shuffle(9999);
        mCasino2.shuffle(9999);
        mCasino3.shuffle(9999);

        let randomNum = randomNumber(1, maxNum);
        let result = pad(randomNum, 3);
        console.log(`Random number is: ${randomNum}`);
        let resultArr = result.split("").map((num) => {
          return Number(num);
        });

        firstNumber = resultArr[0];
        secondNumber = resultArr[1];
        thirdNumber = resultArr[2];
      });

      /**
       * Handle event when click stop button
       * get random number on first click
       */
      btnStop.addEventListener("click", () => {
        switch (count) {
          case 3:
            mCasino1.randomize = () => {
              console.log(`First lucky number is: ${firstNumber}`);
              return firstNumber;
            };
            mCasino1.stop();
            break;
          case 2:
            mCasino2.randomize = () => {
              console.log(`Second lucky number is: ${secondNumber}`);
              return secondNumber;
            };
            mCasino2.stop();
            break;
          case 1:
            mCasino3.randomize = () => {
              console.log(`Third lucky number is: ${thirdNumber}`);
              return thirdNumber;
            };
            mCasino3.stop();
            console.log(
              `Final Number: ${firstNumber}${secondNumber}${thirdNumber}`
            );
            break;
        }
        count--;
      });
    </script>
  </body>
</html>
